var acadiaTraction=acadiaTraction||{};~function(a){a.extend(acadiaTraction,{aAnimationImgs:[],aAnimationImgsB:[],aImgUrls:[],autoplay:null,basePath:"",bAutoplay:!0,$navItems:null,$_target:null,init:function(b){{var c=this;null!=navigator.userAgent.match(/iPad/i)}c.$_target=a(b),c.basePath=c._getBasePath(),c.$_target.length>0&&(c.$navItems=c.$_target.find(".nav").each(function(){c.aImgUrls.push(c.basePath+a(this).data("img-url")),c.aAnimationImgs.push(c.basePath+a(this).data("animation-img")),c.aAnimationImgsB.push(c.basePath+a(this).data("animation-img-b"))}),c.callBindings())},preload:function(){if(this.preload.arguments.length>1)for(var a=this.preload.arguments.length-1;a>=0;a--)this.preload(this.preload.arguments[a]);else{var b=new Array;for(a=0;a<this.preload.arguments[0].length;a++)b[a]=new Image,b[a].src=this.preload.arguments[0][a]}},callBindings:function(){var b=this;b.$navItems.on("click",function(){var c,d=a(this),e=b.$_target.find(".nav.active").data("index"),f=d.data("index");c={start:e,end:f},b.$navItems.removeClass("active"),d.addClass("active"),b._playTransitionAnimation(e,f,c)})},_playTransitionAnimation:function(a,b,c,d){var e=this;if($overlay=e.$_target.find(".overlay"),b>a)a++;else{if(!(a>b))return void(0===c.start?window.setTimeout(function(){$overlay.css("background-image","url("+e.aAnimationImgs[b]+")"),window.setTimeout(function(){$overlay.css("background-image","url("+e.aAnimationImgsB[b]+")"),window.setTimeout(function(){$overlay.css("background-image","url("+e.aAnimationImgs[b]+")"),e.$_target.find("video:visible").fadeOut(),window.setTimeout(function(){e.$_target.find("video[data-index="+b+"]").fadeIn()},200)},500)},500)},700):0===b?window.setTimeout(function(){$overlay.css("background-image","url("+e.aAnimationImgsB[b]+")"),window.setTimeout(function(){$overlay.css("background-image","url("+e.aAnimationImgs[b]+")"),window.setTimeout(function(){$overlay.css("background-image","url("+e.aAnimationImgsB[b]+")"),e.$_target.find("video:visible").fadeOut(),window.setTimeout(function(){e.$_target.find("video[data-index="+b+"]").fadeIn()},200)},500)},500)},700):window.setTimeout(function(){e.$_target.find("video:visible").fadeOut(),window.setTimeout(function(){e.$_target.find("video[data-index="+b+"]").fadeIn()},200)},700));a--}window.setTimeout(function(){0===c.start?$overlay.css("background-image","url("+e.aAnimationImgsB[a]+")"):$overlay.css("background-image","url("+e.aAnimationImgs[a]+")"),e._playTransitionAnimation(a,b,c,d)},1e3)},_getBasePath:function(){var a=this,b=a.$_target.parent(),c=b.find("style"),d="";if(c.length){c=c[0].innerHTML;var e=new RegExp(/@import url(.*?);/);c=e.exec(c)[1],c=c.replace(/[(|)]|'|\s/g,""),d=c.replace("css/acadia-traction.min.css","")}return d}}),a(document).ready(function(){acadiaTraction.init("#acadia-traction")})}(jQuery);